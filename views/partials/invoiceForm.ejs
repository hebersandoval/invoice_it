<!-- Invoice form container -->
<div class="form-container">
    <h2>Create Invoice</h2>

    <!-- Invoice form -->
    <form action="<%- formAction %>" method="POST">

        <%- include('../partials/formErrors') %>

        <!-- Client selection -->
        <div class="form-group">
            <!-- Customer Selection (you can populate dynamically later) -->
            <label for="customer">Choose customer</label>
            <select id="customer" name="customer" required 
                    style="width: 100%; padding: 0.75rem; margin-bottom: 1rem; border: 1px solid #ddd; border-radius: 4px; font-size: 1rem;">
                <option value="">-- Select a customer --</option>
                <% customers.forEach(function(customer) { %>
                    <option value="<%= customer._id %>" <%= String(invoice?.customer?._id) === String(customer._id) ? 'selected' : '' %>>
                        <%= customer.name %>
                    </option>
                <% }) %>
            </select>
        </div>

        <!-- Amount -->
        <div class="form-group">
            <label for="amount">Amount <span class="required">*</span></label>
            <input
                type="number"
                id="amount"
                name="amount"
                placeholder="Enter in USD"
                value="<%= invoice?.amount || '' %>"
            />
        </div>

        <!-- Invoice date -->
        <div class="form-group">
            <label for="date">Due Date <span class="required">*</span></label>
            <input
                type="text"
                id="date"
                name="date"
                placeholder="11/18/2025"
                value="<%= invoice?.date? new Date(invoice.date).toLocaleDateString('en-US') : '' %>"
            />
        </div>

        <!-- Status -->
        <label for="status">Status</label>
        <select id="status" name="status" required 
                style="width: 100%; padding: 0.75rem; margin-bottom: 1rem; border: 1px solid #ddd; border-radius: 4px; font-size: 1rem;">
                <option 
                    value="pending" <%= invoice?.status === 'pending' ? 'checked' : '' %>
                >
                    Pending
                </option>
                <option 
                    value="paid" <%= invoice?.status === 'paid' ? 'checked' : '' %>
                >
                   Paid 
                </option>
        </select>

        <!-- Submit button -->
        <button type="submit"><%= title %></button>
        </button>
            <a href="/dashboard/invoices" style="margin-left: 1rem; color: #3498db;">Cancel</a>
      </div>
    </form>
</div>


<script src="https://cdn.jsdelivr.net/npm/vanillajs-datepicker@1.3.4/dist/js/datepicker-full.min.js"></script>
<script>
    const elem = document.querySelector("#date");
    const datepicker = new Datepicker(elem, {
        autohide: true,
        format: "m/d/yyyy",
    });
</script>
